<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Productivity Booster</title>
    <style>
        /* ... (previous CSS remains unchanged) ... */
    </style>
</head>
<body>
    <!-- ... (previous HTML structure remains unchanged) ... -->
    
    <script>
        // ... (previous JavaScript code remains unchanged until the voice recognition part) ...

        // Voice-to-Text for Task Name and Time Inputs
        const voiceRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        if (voiceRecognition) {
            const recognizer = new voiceRecognition();
            
            document.getElementById('voiceTaskName').addEventListener('click', () => {
                recognizer.start();
                recognizer.onresult = (event) => {
                    document.getElementById('taskName').value = event.results[0][0].transcript;
                };
            });

            document.getElementById('voiceEstimatedTime').addEventListener('click', () => {
                recognizer.start();
                recognizer.onresult = (event) => {
                    document.getElementById('estimatedTime').value = wordsToNumbers(event.results[0][0].transcript);
                };
            });

            document.getElementById('voiceActualTime').addEventListener('click', () => {
                recognizer.start();
                recognizer.onresult = (event) => {
                    document.getElementById('actualTime').value = wordsToNumbers(event.results[0][0].transcript);
                };
            });

            document.getElementById('voiceTaskDetails').addEventListener('click', () => {
                recognizer.start();
                recognizer.onresult = (event) => {
                    document.getElementById('taskDetails').value = event.results[0][0].transcript;
                };
            });

            recognizer.onerror = (event) => {
                alert(`Error occurred in recognition: ${event.error}`);
            };
        } else {
            alert('Voice recognition not supported in this browser.');
        }

        function wordsToNumbers(text) {
            const wordToNumber = {
                'zero': 0, 'one': 1, 'two': 2, 'three': 3, 'four': 4, 'five': 5, 'six': 6, 'seven': 7, 'eight': 8, 'nine': 9, 'ten': 10,
                'eleven': 11, 'twelve': 12, 'thirteen': 13, 'fourteen': 14, 'fifteen': 15, 'sixteen': 16, 'seventeen': 17, 'eighteen': 18, 'nineteen': 19, 'twenty': 20,
                'thirty': 30, 'forty': 40, 'fifty': 50, 'sixty': 60, 'seventy': 70, 'eighty': 80, 'ninety': 90,
                'hundred': 100, 'thousand': 1000, 'million': 1000000
            };

            const words = text.toLowerCase().split(/\s+/);
            let result = 0;
            let currentNumber = 0;

            for (const word of words) {
                if (wordToNumber[word] !== undefined) {
                    if (wordToNumber[word] === 100) {
                        currentNumber *= 100;
                    } else if (wordToNumber[word] === 1000 || wordToNumber[word] === 1000000) {
                        currentNumber *= wordToNumber[word];
                        result += currentNumber;
                        currentNumber = 0;
                    } else {
                        currentNumber += wordToNumber[word];
                    }
                }
            }

            return result + currentNumber || text;
        }

        // AI Assistance for Task Details
        document.getElementById('aiAssist').addEventListener('click', function() {
            const taskDetails = document.getElementById('taskDetails').value;
            const enhancedText = formalizeAndEnhanceText(taskDetails);
            document.getElementById('taskDetails').value = enhancedText;
        });

        function formalizeAndEnhanceText(text) {
            // Split text into sentences
            const sentences = text.match(/[^.!?]+[.!?]+/g) || [text];
            
            // Process each sentence
            const enhancedSentences = sentences.map(sentence => {
                return enhanceLanguage(sentence.trim());
            });

            // Convert to bullet points
            return enhancedSentences.map(sentence => `â€¢ ${sentence}`).join('\n');
        }

        function enhanceLanguage(sentence) {
            // Capitalize first letter
            sentence = sentence.charAt(0).toUpperCase() + sentence.slice(1);

            // Replace contractions and informal words
            const replacements = {
                'i': 'I',
                "can't": 'cannot',
                "don't": 'do not',
                "won't": 'will not',
                "shouldn't": 'should not',
                "couldn't": 'could not',
                "wouldn't": 'would not',
                "isn't": 'is not',
                "aren't": 'are not',
                "wasn't": 'was not',
                "weren't": 'were not',
                "hasn't": 'has not',
                "haven't": 'have not',
                "hadn't": 'had not',
                "didn't": 'did not',
                'gonna': 'going to',
                'wanna': 'want to',
                'gotta': 'got to',
                'kinda': 'kind of',
                'sorta': 'sort of',
                'dunno': 'do not know',
                'yeah': 'yes',
                'yep': 'yes',
                'nope': 'no',
                'cuz': 'because',
                'cause': 'because',
                'cos': 'because',
                'ok': 'okay'
            };

            for (const [informal, formal] of Object.entries(replacements)) {
                const regex = new RegExp(`\\b${informal}\\b`, 'gi');
                sentence = sentence.replace(regex, formal);
            }

            // Ensure the sentence ends with proper punctuation
            if (!/[.!?]$/.test(sentence)) {
                sentence += '.';
            }

            return sentence;
        }

        // Initial dashboard update
        updateDashboard();
    </script>
</body>
</html>
